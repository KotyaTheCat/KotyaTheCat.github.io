<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
      <link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"
        integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous" />
     <script src="../../src/js/jquery.min.js"></script>
      <link rel="stylesheet" href="../../src/css/style.css">
      <link rel="stylesheet" href="../../src/css/responsive.css">
      <link rel="stylesheet" href="style-instr.css">
      <link rel="shortcut icon" type="image/x-icon" href="../../src/img/favicon.ico" />

<!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

    <title>KotyaTheCat</title>
  </head>
   <body style="overflow-y: hidden;">

  <div class="preloader">
    <div class="loader">
      <img src="../../src/img/loader.gif" alt="loader">
    </div>
  </div>
  
  <div class="site-menu" id="siteMenu">
    <a class="site-menu__link site-menu__link--second" href="https://kotyathecat.github.io/">
       <center> <i class="fa fa-home"></i> </center>
      <p style="font-size: 18px">Home</p>
    </a>
    <a class="site-menu__link site-menu__link--second" href="../../about">
       <center> <i class="fa fa-user"></i> </center>
      <p style="font-size: 18px">About</p>
    </a>
    <a class="site-menu__link site-menu__link--second" href="../../devices">
       <center> <i class="fa fa-mobile"></i> </center>
        <p style="font-size: 18px">Devices</p>
    </a>
    <a class="site-menu__link site-menu__link--already">
       <center> <i class="fa fa-newspaper-o" aria-hidden="true"></i> </center>
        <p style="font-size: 18px">News</p>
    </a>
  </div>
  <div class="site">
    <div class="navbar">
      <div class="navbar__logo">KotyaTheCat</div>
      <div class="navbar__burger" id="menuBtn">
        <div class="bar1"></div>
        <div class="bar2"></div>
        <div class="bar3"></div>
      </div>
    </div>
    <a class="backbutton" href="../../news"><i class="fa fa-arrow-circle-o-left fa-3x" aria-hidden="true"></i></a>
    <div class="indentation"></div>
    <div class="container">
        <div class="row align-items-centre">
        <div class="posts-12 posts-md-6">
            <div class="title-post-para">Сборка Android из исходников [Инструкция]</div>
            <div class="posts-para">Долго собирался написать эту инструкцию, в первую очередь для себя, так как часто переустанавливаю операционку на компьютере. Делаю всё на примере Ubuntu 19.10, которая находится у меня на Google Cloud. Итак, перейдём сразу к делу. 
<ul>1. Мы установили Ubuntu, теперь обновим уже имеющиеся пакеты в системе:</ul>
<ul><div class="line" readonly="">sudo apt-get update && sudo apt-get dist-upgrade</div></ul>

2. Теперь поставим нужные нам пакеты, которых нет по умолчанию в системе:
<ul><div class="line" readonly="">sudo apt-get install git-core gnupg flex bison gperf build-essential zip curl zlib1g-dev gcc-multilib g++-multilib libc6-dev-i386 lib32ncurses5-dev x11proto-core-dev libx11-dev lib32z-dev libgl1-mesa-dev libxml2-utils xsltproc unzip bc ccache git imagemagick lib32readline-dev lib32z1-dev liblz4-tool pngquant libncurses5 libncurses5-dev libsdl1.2-dev libssl-dev libxml2 lzop pngcrush rsync schedtool squashfs-tools openjdk-8-jdk p7zip-full meld brotli qt5-qmake android-tools-adb android-tools-fastboot texinfo maven swapspace</div></ul>
 
3. Прописываем кэш:
<ul><div class="line" readonly="">ccache -M 50G</div></ul>

4. Открываем bashrc для выполнения некоторых команд при запуске
<ul><div class="line" readonly="">sudo nano ~/.bashrc</div></ul>

Добавляем в конец:

<div class="line" readonly=""><ul>export USE_CCACHE=1
export PATH=~/bin:$PATH</ul></div>

Закрываем клавишами ctrl+x и ctrl+y, прописываем в терминале

<div class="line" readonly=""><ul>source ~/.bashrc</ul></div>

5. Ставим repo:
<div class="line" readonly=""><ul>mkdir ~/bin && PATH=~/bin:$PATH && curl https://storage.googleapis.com/git-repo-downloads/repo > ~/bin/repo && chmod a+x ~/bin/repo</ul></div>

6. Зарегистрируемся в git:
<div class="line" readonly=""><ul>git config --global user.name "name" && git config --global user.email "email@mail.com"</ul></div>
<ul>name - Логин, ник на гите</ul>
<ul>email@mail.com - тут всё понятно, почта аккаунта на гите</ul>

7. Создаём папку, где будем делать прошивку. Название может быть любое, я буду собирать Evolution X, и название сделаю в честь этой прошивки - evo
<div class="line" readonly=""><ul>mkdir evo && cd evo</ul></div>

8. Скачиваем исходники. У каждой прошивки свои исходники, ссылка на них (в манифесте) соответственно тоже. У EvoX:
<div class="line" readonly=""><ul>repo init -u https://github.com/Evolution-X/manifest -b ten</ul></div>

9. Синхронизируем исходники
<div class="line" readonly=""><ul>repo sync -c -j$(nproc --all) --force-sync --no-clone-bundle --no-tags</ul></div>

10. Загрузка конфигов для устройства
<ul>Тут мы ищем деревья для устройств на github и gitlab, кладём их по местам. Обычно деревья device называются device_производитель_кодовоеимя. Должно быть расположено по пути device/производитель/кодовоеимя. Также с vendor'ом. Чаще всего такой способ применяется и к ядру, но бывает надо смотреть BoardConfig.mk для того, чтобы узнать расположения ядра и его defconfig. У меня, например, device - device_xiaomi_violet, расположен в device/xiaomi/violet. Vendor также, а вот ядро kernel_xiaomi_sm6150, расположено в kernel/xiaomi/sm6150. Если всё готово, тогда продолжаем.</ul>

11. Начинаем сборку:
<div class="line" readonly=""><ul>. build/envsetup.sh</ul></div>

<ul>Даём знать об устройстве:</ul>
<div class="line" readonly=""><ul>lunch aosp_device-userdebug</ul></div>

<ul>device - кодовое имя вашего устройства.</ul>
<ul>userdebug - тип сборки. Также может быть eng и user.</ul>

<ul>И начинаем сборку:</ul>
<div class="line" readonly=""><ul>mka bacon -jX</ul></div>
<ul>X - кол-во ядер. У меня 16.</ul>

Исправляем ошибки при сборке, если они есть. Процесс компиляции сборки долгий, времени много уйдёт на него.

</div>
            <div class="posts-para">Kotya Agapkin (TheKotya / KotyaTheCat)<div class="date-post">May 10, 2020</div></div>
        </div>
      </div>
      </div>
    </div>
  </div>
  <script src="../../src/js/script.js"></script>
  <script src="https://unpkg.com/aos@next/dist/aos.js"></script>
  <script>
    AOS.init({
      duration: 700,
      once: true,
    });
  </script>
  </body>
</html>
